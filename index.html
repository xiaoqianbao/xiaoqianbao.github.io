
<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="normalize.css">
    <!-- <link rel="stylesheet" href="main.css"> -->
    <!-- <script src="js/vendor/modernizr-2.6.2.min.js"></script> -->
    <!-- <script src="main.js"></script> -->
</head>
<body>
    <div class="header">

    </div>
    <div class="main">
       我的邀请码：<span class="invite-code"></span>

    <div>

    <script type="text/javascript">
        function ajax(url, opts){
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(){
                var completed = 4;
                if(xhr.readyState === completed){
                    if(xhr.status === 200){
                        opts.success(xhr.responseText, xhr);
                    }else{
                        opts.error(xhr.responseText, xhr);
                    }
                }
            };
            xhr.open(opts.method, url, true);
            xhr.send(opts.data);
        }

        //============================================================
        var userId = window.location.search.substring(1).split('=')[1];
        ajax('http://120.24.54.63/invite-code?userId='+ userId, {
            method: 'GET',
            success: function(response){
                console.log(JSON.parse(response));
                var data = JSON.parse(response);


                document.querySelector('.invite-code').innerHTML = data.d.inviteCode;

            },
            error: function(response){
                console.log(response);
            }
        });

    </script>

</body>
</html>
